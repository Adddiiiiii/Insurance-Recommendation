{"ast":null,"code":"/**\n * Recommend insurance products based on user profile\n * \n * @param {Array} insuranceProducts - Array of insurance products\n * @param {Object} userProfile - User profile data\n * @returns {Array} - Array of recommended products with details\n */\nexport const recommendProducts = (insuranceProducts, userProfile) => {\n  const {\n    age,\n    income,\n    financialGoal,\n    riskAppetite\n  } = userProfile;\n  const recommendedProducts = [];\n\n  // Define the new financial goals\n  const financialGoals = [\"Tax Saving\", \"Wealth Creation\", \"Life Cover\", \"Health Security\", \"Emergency Fund\", \"Retirement Planning\", \"Child Education\", \"Estate Planning\"];\n\n  // First pass: Find exact matches for all criteria\n  for (const product of insuranceProducts) {\n    // Check if product matches user criteria\n    const ageMatch = product.minAge <= age && age <= product.maxAge;\n    const incomeMatch = income >= product.minIncome;\n\n    // Clean up suitableFor and risk fields if they're strings with array notation\n    let suitableFor = product.suitableFor;\n    if (typeof suitableFor === 'string') {\n      // Remove array notation and split by comma\n      suitableFor = suitableFor.replace(/[\\[\\]']/g, '').split(',').map(item => item.trim());\n    }\n    let risk = product.risk;\n    if (typeof risk === 'string') {\n      // Remove array notation and split by comma\n      risk = risk.replace(/[\\[\\]']/g, '').split(',').map(item => item.trim());\n    }\n\n    // Check if the financial goal matches\n    const goalMatch = Array.isArray(suitableFor) && suitableFor.some(goal => goal === financialGoal);\n\n    // Check if the risk appetite matches\n    const riskMatch = Array.isArray(risk) && risk.some(r => r === riskAppetite);\n    if (ageMatch && incomeMatch && goalMatch && riskMatch) {\n      // Calculate estimated premium\n      const monthlyPremium = Math.round(income * product.premiumFactor / 12 * 100) / 100;\n      recommendedProducts.push({\n        name: product.name,\n        description: product.description,\n        monthlyPremium,\n        annualPremium: monthlyPremium * 12,\n        taxBenefit: product.taxBenefit\n      });\n    }\n  }\n\n  // If no exact matches, try more flexible matching\n  if (recommendedProducts.length === 0) {\n    for (const product of insuranceProducts) {\n      // Check if product matches essential criteria (age and income)\n      const ageMatch = product.minAge <= age && age <= product.maxAge;\n      const incomeMatch = income >= product.minIncome;\n\n      // Clean up suitableFor and risk fields if they're strings with array notation\n      let suitableFor = product.suitableFor;\n      if (typeof suitableFor === 'string') {\n        // Remove array notation and split by comma\n        suitableFor = suitableFor.replace(/[\\[\\]']/g, '').split(',').map(item => item.trim());\n      }\n      let risk = product.risk;\n      if (typeof risk === 'string') {\n        // Remove array notation and split by comma\n        risk = risk.replace(/[\\[\\]']/g, '').split(',').map(item => item.trim());\n      }\n\n      // Either goal or risk should match suitableFor.some(goal => goal === financialGoal);\n      const riskMatch = Array.isArray(risk) && risk.some(r => r === riskAppetite);\n      if (ageMatch && incomeMatch && (goalMatch || riskMatch)) {\n        // Calculate estimated premium\n        const monthlyPremium = Math.round(income * product.premiumFactor / 12 * 100) / 100;\n        recommendedProducts.push({\n          name: product.name,\n          description: product.description,\n          monthlyPremium,\n          annualPremium: monthlyPremium * 12,\n          taxBenefit: product.taxBenefit,\n          // Flag to indicate this is a partial match\n          partialMatch: true,\n          matchedOnGoal: goalMatch,\n          matchedOnRisk: riskMatch\n        });\n      }\n    }\n  }\n  return recommendedProducts;\n};\n\n/**\n * Generate personalized response based on user profile and recommendations\n * \n * @param {Object} userProfile - User profile data\n * @param {Array} recommendedProducts - Array of recommended products\n * @returns {String} - Personalized response\n */\nexport const generateResponse = (userProfile, recommendedProducts) => {\n  const {\n    age,\n    income,\n    financialGoal,\n    riskAppetite\n  } = userProfile;\n  if (recommendedProducts.length === 0) {\n    return \"Based on your profile, we couldn't find suitable insurance products. Please consider adjusting your preferences or consult with our financial advisors for personalized recommendations.\";\n  }\n  let productNames = recommendedProducts.map(p => p.name);\n  let productNamesText = '';\n  if (productNames.length === 1) {\n    productNamesText = productNames[0];\n  } else {\n    productNamesText = productNames.slice(0, -1).join(', ') + ' and ' + productNames[productNames.length - 1];\n  }\n  const riskDescriptions = {\n    \"Low\": \"conservative approach to financial planning\",\n    \"Medium\": \"balanced approach to risk and returns\",\n    \"High\": \"growth-oriented investment strategy\"\n  };\n  const goalDescriptions = {\n    \"Tax Saving\": \"optimize your tax liabilities\",\n    \"Wealth Creation\": \"build wealth over the long term\",\n    \"Life Cover\": \"provide financial security for your loved ones\",\n    \"Health Security\": \"secure your health and well-being\",\n    \"Emergency Fund\": \"prepare for unexpected financial needs\",\n    \"Retirement Planning\": \"ensure a comfortable retirement\",\n    \"Child Education\": \"secure your child's educational future\",\n    \"Estate Planning\": \"effectively transfer wealth to the next generation\"\n  };\n\n  // Add a note about partial matches if applicable\n  let partialMatchNote = \"\";\n  if (recommendedProducts.some(p => p.partialMatch)) {\n    partialMatchNote = \"\\n\\nSome recommendations are based on partial matches to your criteria, but still align well with your overall profile.\";\n  }\n  return `\n    As a ${age}-year-old with a ${riskAppetite.toLowerCase()} risk appetite (a ${riskDescriptions[riskAppetite] || \"personalized investment strategy\"}) \n    and a primary goal of ${financialGoal} (looking to ${goalDescriptions[financialGoal] || \"meet your specific financial objectives\"}), \n    we recommend ${productNamesText}.\n    \n    These products align well with your financial profile and can help you achieve your objectives \n    while staying within your risk comfort zone. The estimated premiums are based on your annual income \n    of ₹${income.toLocaleString()}.${partialMatchNote}\n    \n    We suggest scheduling a consultation with a financial advisor to customize these recommendations \n    further based on your specific needs and circumstances.\n  `;\n};\n\n/**\n * Generate AI-powered recommendations using the Gemma model API\n * \n * @param {Object} userProfile - User profile data\n * @param {Array} recommendedProducts - Array of recommended products\n * @returns {Promise<String>} - AI-generated recommendation response\n */\nexport const generateAIRecommendation = async (userProfile, recommendedProducts) => {\n  const {\n    age,\n    income,\n    financialGoal,\n    riskAppetite\n  } = userProfile;\n  try {\n    // Create a detailed prompt for the AI model\n    let prompt = `\nUser Profile:\n- Age: ${age} years\n- Annual Income: ₹${income.toLocaleString()}\n- Financial Goal: ${financialGoal}\n- Risk Appetite: ${riskAppetite}\n\nRecommended Insurance Products:\n`;\n    if (recommendedProducts.length === 0) {\n      prompt += \"No products matched the user's criteria.\";\n    } else {\n      recommendedProducts.forEach((product, index) => {\n        prompt += `\n${index + 1}. ${product.name}\n   Description: ${product.description}\n   Monthly Premium: ₹${product.monthlyPremium.toLocaleString()}\n   Annual Premium: ₹${product.annualPremium.toLocaleString()}\n   Tax Benefit: ${product.taxBenefit ? 'Yes' : 'No'}\n   ${product.partialMatch ? '(Partial match)' : '(Exact match)'}\n`;\n      });\n    }\n    prompt += `\nBased on the user's profile and the recommended insurance products, provide a detailed, personalized recommendation. \nExplain why these products are suitable for the user's age, income level, financial goals, and risk appetite. \nIf there are partial matches, explain why they might still be good options. \nInclude advice on how the user might optimize their insurance coverage based on their specific situation.\n`;\n    console.log('Sending request to AI recommendation API...');\n\n    // Call the backend API\n    const response = await fetch('/api/generate-recommendation', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        prompt\n      })\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      console.error('API response not OK:', errorData);\n      throw new Error(errorData.error || 'Failed to generate AI recommendation');\n    }\n    const data = await response.json();\n\n    // Check if we got a fallback response due to API issues\n    if (data.error) {\n      console.warn('Received fallback response:', data.message);\n      return `${data.reply}\\n\\n[Note: This is a fallback recommendation as our AI service is temporarily unavailable.]`;\n    }\n    return data.reply;\n  } catch (error) {\n    console.error('Error generating AI recommendation:', error);\n    // Fall back to the standard response if AI generation fails\n    const standardResponse = generateResponse(userProfile, recommendedProducts);\n    return `${standardResponse}\\n\\n[Note: We're experiencing technical difficulties with our AI recommendation system. This is a standard recommendation.]`;\n  }\n};","map":{"version":3,"names":["recommendProducts","insuranceProducts","userProfile","age","income","financialGoal","riskAppetite","recommendedProducts","financialGoals","product","ageMatch","minAge","maxAge","incomeMatch","minIncome","suitableFor","replace","split","map","item","trim","risk","goalMatch","Array","isArray","some","goal","riskMatch","r","monthlyPremium","Math","round","premiumFactor","push","name","description","annualPremium","taxBenefit","length","partialMatch","matchedOnGoal","matchedOnRisk","generateResponse","productNames","p","productNamesText","slice","join","riskDescriptions","goalDescriptions","partialMatchNote","toLowerCase","toLocaleString","generateAIRecommendation","prompt","forEach","index","console","log","response","fetch","method","headers","body","JSON","stringify","ok","errorData","json","error","Error","data","warn","message","reply","standardResponse"],"sources":["C:/Users/adity/OneDrive/Documents/AI/Insurance Recommendation Agent/src/utils/recommendationUtils.js"],"sourcesContent":["/**\n * Recommend insurance products based on user profile\n * \n * @param {Array} insuranceProducts - Array of insurance products\n * @param {Object} userProfile - User profile data\n * @returns {Array} - Array of recommended products with details\n */\nexport const recommendProducts = (insuranceProducts, userProfile) => {\n  const { age, income, financialGoal, riskAppetite } = userProfile;\n  const recommendedProducts = [];\n  \n  // Define the new financial goals\n  const financialGoals = [\n    \"Tax Saving\",\n    \"Wealth Creation\",\n    \"Life Cover\",\n    \"Health Security\",\n    \"Emergency Fund\",\n    \"Retirement Planning\",\n    \"Child Education\",\n    \"Estate Planning\"\n  ];\n  \n  // First pass: Find exact matches for all criteria\n  for (const product of insuranceProducts) {\n    // Check if product matches user criteria\n    const ageMatch = product.minAge <= age && age <= product.maxAge;\n    const incomeMatch = income >= product.minIncome;\n    \n    // Clean up suitableFor and risk fields if they're strings with array notation\n    let suitableFor = product.suitableFor;\n    if (typeof suitableFor === 'string') {\n      // Remove array notation and split by comma\n      suitableFor = suitableFor.replace(/[\\[\\]']/g, '').split(',').map(item => item.trim());\n    }\n    \n    let risk = product.risk;\n    if (typeof risk === 'string') {\n      // Remove array notation and split by comma\n      risk = risk.replace(/[\\[\\]']/g, '').split(',').map(item => item.trim());\n    }\n    \n    // Check if the financial goal matches\n    const goalMatch = Array.isArray(suitableFor) && suitableFor.some(goal => goal === financialGoal);\n    \n    // Check if the risk appetite matches\n    const riskMatch = Array.isArray(risk) && risk.some(r => r === riskAppetite);\n    \n    if (ageMatch && incomeMatch && goalMatch && riskMatch) {\n      // Calculate estimated premium\n      const monthlyPremium = Math.round((income * product.premiumFactor) / 12 * 100) / 100;\n      \n      recommendedProducts.push({\n        name: product.name,\n        description: product.description,\n        monthlyPremium,\n        annualPremium: monthlyPremium * 12,\n        taxBenefit: product.taxBenefit\n      });\n    }\n  }\n  \n  // If no exact matches, try more flexible matching\n  if (recommendedProducts.length === 0) {\n    for (const product of insuranceProducts) {\n      // Check if product matches essential criteria (age and income)\n      const ageMatch = product.minAge <= age && age <= product.maxAge;\n      const incomeMatch = income >= product.minIncome;\n      \n      // Clean up suitableFor and risk fields if they're strings with array notation\n      let suitableFor = product.suitableFor;\n      if (typeof suitableFor === 'string') {\n        // Remove array notation and split by comma\n        suitableFor = suitableFor.replace(/[\\[\\]']/g, '').split(',').map(item => item.trim());\n      }\n      \n      let risk = product.risk;\n      if (typeof risk === 'string') {\n        // Remove array notation and split by comma\n        risk = risk.replace(/[\\[\\]']/g, '').split(',').map(item => item.trim());\n      }\n      \n      // Either goal or risk should match suitableFor.some(goal => goal === financialGoal);\n      const riskMatch = Array.isArray(risk) && \n                       risk.some(r => r === riskAppetite);\n      \n      if (ageMatch && incomeMatch && (goalMatch || riskMatch)) {\n        // Calculate estimated premium\n        const monthlyPremium = Math.round((income * product.premiumFactor) / 12 * 100) / 100;\n        \n        recommendedProducts.push({\n          name: product.name,\n          description: product.description,\n          monthlyPremium,\n          annualPremium: monthlyPremium * 12,\n          taxBenefit: product.taxBenefit,\n          // Flag to indicate this is a partial match\n          partialMatch: true,\n          matchedOnGoal: goalMatch,\n          matchedOnRisk: riskMatch\n        });\n      }\n    }\n  }\n  \n  return recommendedProducts;\n};\n\n/**\n * Generate personalized response based on user profile and recommendations\n * \n * @param {Object} userProfile - User profile data\n * @param {Array} recommendedProducts - Array of recommended products\n * @returns {String} - Personalized response\n */\nexport const generateResponse = (userProfile, recommendedProducts) => {\n  const { age, income, financialGoal, riskAppetite } = userProfile;\n  \n  if (recommendedProducts.length === 0) {\n    return \"Based on your profile, we couldn't find suitable insurance products. Please consider adjusting your preferences or consult with our financial advisors for personalized recommendations.\";\n  }\n  \n  let productNames = recommendedProducts.map(p => p.name);\n  let productNamesText = '';\n  \n  if (productNames.length === 1) {\n    productNamesText = productNames[0];\n  } else {\n    productNamesText = productNames.slice(0, -1).join(', ') + ' and ' + productNames[productNames.length - 1];\n  }\n  \n  const riskDescriptions = {\n    \"Low\": \"conservative approach to financial planning\",\n    \"Medium\": \"balanced approach to risk and returns\",\n    \"High\": \"growth-oriented investment strategy\"\n  };\n  \n  const goalDescriptions = {\n    \"Tax Saving\": \"optimize your tax liabilities\",\n    \"Wealth Creation\": \"build wealth over the long term\",\n    \"Life Cover\": \"provide financial security for your loved ones\",\n    \"Health Security\": \"secure your health and well-being\",\n    \"Emergency Fund\": \"prepare for unexpected financial needs\",\n    \"Retirement Planning\": \"ensure a comfortable retirement\",\n    \"Child Education\": \"secure your child's educational future\",\n    \"Estate Planning\": \"effectively transfer wealth to the next generation\"\n  };\n  \n  // Add a note about partial matches if applicable\n  let partialMatchNote = \"\";\n  if (recommendedProducts.some(p => p.partialMatch)) {\n    partialMatchNote = \"\\n\\nSome recommendations are based on partial matches to your criteria, but still align well with your overall profile.\";\n  }\n  \n  return `\n    As a ${age}-year-old with a ${riskAppetite.toLowerCase()} risk appetite (a ${riskDescriptions[riskAppetite] || \"personalized investment strategy\"}) \n    and a primary goal of ${financialGoal} (looking to ${goalDescriptions[financialGoal] || \"meet your specific financial objectives\"}), \n    we recommend ${productNamesText}.\n    \n    These products align well with your financial profile and can help you achieve your objectives \n    while staying within your risk comfort zone. The estimated premiums are based on your annual income \n    of ₹${income.toLocaleString()}.${partialMatchNote}\n    \n    We suggest scheduling a consultation with a financial advisor to customize these recommendations \n    further based on your specific needs and circumstances.\n  `;\n};\n\n/**\n * Generate AI-powered recommendations using the Gemma model API\n * \n * @param {Object} userProfile - User profile data\n * @param {Array} recommendedProducts - Array of recommended products\n * @returns {Promise<String>} - AI-generated recommendation response\n */\nexport const generateAIRecommendation = async (userProfile, recommendedProducts) => {\n  const { age, income, financialGoal, riskAppetite } = userProfile;\n  \n  try {\n    // Create a detailed prompt for the AI model\n    let prompt = `\nUser Profile:\n- Age: ${age} years\n- Annual Income: ₹${income.toLocaleString()}\n- Financial Goal: ${financialGoal}\n- Risk Appetite: ${riskAppetite}\n\nRecommended Insurance Products:\n`;\n\n    if (recommendedProducts.length === 0) {\n      prompt += \"No products matched the user's criteria.\";\n    } else {\n      recommendedProducts.forEach((product, index) => {\n        prompt += `\n${index + 1}. ${product.name}\n   Description: ${product.description}\n   Monthly Premium: ₹${product.monthlyPremium.toLocaleString()}\n   Annual Premium: ₹${product.annualPremium.toLocaleString()}\n   Tax Benefit: ${product.taxBenefit ? 'Yes' : 'No'}\n   ${product.partialMatch ? '(Partial match)' : '(Exact match)'}\n`;\n      });\n    }\n\n    prompt += `\nBased on the user's profile and the recommended insurance products, provide a detailed, personalized recommendation. \nExplain why these products are suitable for the user's age, income level, financial goals, and risk appetite. \nIf there are partial matches, explain why they might still be good options. \nInclude advice on how the user might optimize their insurance coverage based on their specific situation.\n`;\n\n    console.log('Sending request to AI recommendation API...');\n    \n    // Call the backend API\n    const response = await fetch('/api/generate-recommendation', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ prompt }),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      console.error('API response not OK:', errorData);\n      throw new Error(errorData.error || 'Failed to generate AI recommendation');\n    }\n\n    const data = await response.json();\n    \n    // Check if we got a fallback response due to API issues\n    if (data.error) {\n      console.warn('Received fallback response:', data.message);\n      return `${data.reply}\\n\\n[Note: This is a fallback recommendation as our AI service is temporarily unavailable.]`;\n    }\n    \n    return data.reply;\n  } catch (error) {\n    console.error('Error generating AI recommendation:', error);\n    // Fall back to the standard response if AI generation fails\n    const standardResponse = generateResponse(userProfile, recommendedProducts);\n    return `${standardResponse}\\n\\n[Note: We're experiencing technical difficulties with our AI recommendation system. This is a standard recommendation.]`;\n  }\n}; "],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMA,iBAAiB,GAAGA,CAACC,iBAAiB,EAAEC,WAAW,KAAK;EACnE,MAAM;IAAEC,GAAG;IAAEC,MAAM;IAAEC,aAAa;IAAEC;EAAa,CAAC,GAAGJ,WAAW;EAChE,MAAMK,mBAAmB,GAAG,EAAE;;EAE9B;EACA,MAAMC,cAAc,GAAG,CACrB,YAAY,EACZ,iBAAiB,EACjB,YAAY,EACZ,iBAAiB,EACjB,gBAAgB,EAChB,qBAAqB,EACrB,iBAAiB,EACjB,iBAAiB,CAClB;;EAED;EACA,KAAK,MAAMC,OAAO,IAAIR,iBAAiB,EAAE;IACvC;IACA,MAAMS,QAAQ,GAAGD,OAAO,CAACE,MAAM,IAAIR,GAAG,IAAIA,GAAG,IAAIM,OAAO,CAACG,MAAM;IAC/D,MAAMC,WAAW,GAAGT,MAAM,IAAIK,OAAO,CAACK,SAAS;;IAE/C;IACA,IAAIC,WAAW,GAAGN,OAAO,CAACM,WAAW;IACrC,IAAI,OAAOA,WAAW,KAAK,QAAQ,EAAE;MACnC;MACAA,WAAW,GAAGA,WAAW,CAACC,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAACC,IAAI,IAAIA,IAAI,CAACC,IAAI,CAAC,CAAC,CAAC;IACvF;IAEA,IAAIC,IAAI,GAAGZ,OAAO,CAACY,IAAI;IACvB,IAAI,OAAOA,IAAI,KAAK,QAAQ,EAAE;MAC5B;MACAA,IAAI,GAAGA,IAAI,CAACL,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAACC,IAAI,IAAIA,IAAI,CAACC,IAAI,CAAC,CAAC,CAAC;IACzE;;IAEA;IACA,MAAME,SAAS,GAAGC,KAAK,CAACC,OAAO,CAACT,WAAW,CAAC,IAAIA,WAAW,CAACU,IAAI,CAACC,IAAI,IAAIA,IAAI,KAAKrB,aAAa,CAAC;;IAEhG;IACA,MAAMsB,SAAS,GAAGJ,KAAK,CAACC,OAAO,CAACH,IAAI,CAAC,IAAIA,IAAI,CAACI,IAAI,CAACG,CAAC,IAAIA,CAAC,KAAKtB,YAAY,CAAC;IAE3E,IAAII,QAAQ,IAAIG,WAAW,IAAIS,SAAS,IAAIK,SAAS,EAAE;MACrD;MACA,MAAME,cAAc,GAAGC,IAAI,CAACC,KAAK,CAAE3B,MAAM,GAAGK,OAAO,CAACuB,aAAa,GAAI,EAAE,GAAG,GAAG,CAAC,GAAG,GAAG;MAEpFzB,mBAAmB,CAAC0B,IAAI,CAAC;QACvBC,IAAI,EAAEzB,OAAO,CAACyB,IAAI;QAClBC,WAAW,EAAE1B,OAAO,CAAC0B,WAAW;QAChCN,cAAc;QACdO,aAAa,EAAEP,cAAc,GAAG,EAAE;QAClCQ,UAAU,EAAE5B,OAAO,CAAC4B;MACtB,CAAC,CAAC;IACJ;EACF;;EAEA;EACA,IAAI9B,mBAAmB,CAAC+B,MAAM,KAAK,CAAC,EAAE;IACpC,KAAK,MAAM7B,OAAO,IAAIR,iBAAiB,EAAE;MACvC;MACA,MAAMS,QAAQ,GAAGD,OAAO,CAACE,MAAM,IAAIR,GAAG,IAAIA,GAAG,IAAIM,OAAO,CAACG,MAAM;MAC/D,MAAMC,WAAW,GAAGT,MAAM,IAAIK,OAAO,CAACK,SAAS;;MAE/C;MACA,IAAIC,WAAW,GAAGN,OAAO,CAACM,WAAW;MACrC,IAAI,OAAOA,WAAW,KAAK,QAAQ,EAAE;QACnC;QACAA,WAAW,GAAGA,WAAW,CAACC,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAACC,IAAI,IAAIA,IAAI,CAACC,IAAI,CAAC,CAAC,CAAC;MACvF;MAEA,IAAIC,IAAI,GAAGZ,OAAO,CAACY,IAAI;MACvB,IAAI,OAAOA,IAAI,KAAK,QAAQ,EAAE;QAC5B;QACAA,IAAI,GAAGA,IAAI,CAACL,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAACC,IAAI,IAAIA,IAAI,CAACC,IAAI,CAAC,CAAC,CAAC;MACzE;;MAEA;MACA,MAAMO,SAAS,GAAGJ,KAAK,CAACC,OAAO,CAACH,IAAI,CAAC,IACpBA,IAAI,CAACI,IAAI,CAACG,CAAC,IAAIA,CAAC,KAAKtB,YAAY,CAAC;MAEnD,IAAII,QAAQ,IAAIG,WAAW,KAAKS,SAAS,IAAIK,SAAS,CAAC,EAAE;QACvD;QACA,MAAME,cAAc,GAAGC,IAAI,CAACC,KAAK,CAAE3B,MAAM,GAAGK,OAAO,CAACuB,aAAa,GAAI,EAAE,GAAG,GAAG,CAAC,GAAG,GAAG;QAEpFzB,mBAAmB,CAAC0B,IAAI,CAAC;UACvBC,IAAI,EAAEzB,OAAO,CAACyB,IAAI;UAClBC,WAAW,EAAE1B,OAAO,CAAC0B,WAAW;UAChCN,cAAc;UACdO,aAAa,EAAEP,cAAc,GAAG,EAAE;UAClCQ,UAAU,EAAE5B,OAAO,CAAC4B,UAAU;UAC9B;UACAE,YAAY,EAAE,IAAI;UAClBC,aAAa,EAAElB,SAAS;UACxBmB,aAAa,EAAEd;QACjB,CAAC,CAAC;MACJ;IACF;EACF;EAEA,OAAOpB,mBAAmB;AAC5B,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMmC,gBAAgB,GAAGA,CAACxC,WAAW,EAAEK,mBAAmB,KAAK;EACpE,MAAM;IAAEJ,GAAG;IAAEC,MAAM;IAAEC,aAAa;IAAEC;EAAa,CAAC,GAAGJ,WAAW;EAEhE,IAAIK,mBAAmB,CAAC+B,MAAM,KAAK,CAAC,EAAE;IACpC,OAAO,0LAA0L;EACnM;EAEA,IAAIK,YAAY,GAAGpC,mBAAmB,CAACW,GAAG,CAAC0B,CAAC,IAAIA,CAAC,CAACV,IAAI,CAAC;EACvD,IAAIW,gBAAgB,GAAG,EAAE;EAEzB,IAAIF,YAAY,CAACL,MAAM,KAAK,CAAC,EAAE;IAC7BO,gBAAgB,GAAGF,YAAY,CAAC,CAAC,CAAC;EACpC,CAAC,MAAM;IACLE,gBAAgB,GAAGF,YAAY,CAACG,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC,GAAG,OAAO,GAAGJ,YAAY,CAACA,YAAY,CAACL,MAAM,GAAG,CAAC,CAAC;EAC3G;EAEA,MAAMU,gBAAgB,GAAG;IACvB,KAAK,EAAE,6CAA6C;IACpD,QAAQ,EAAE,uCAAuC;IACjD,MAAM,EAAE;EACV,CAAC;EAED,MAAMC,gBAAgB,GAAG;IACvB,YAAY,EAAE,+BAA+B;IAC7C,iBAAiB,EAAE,iCAAiC;IACpD,YAAY,EAAE,gDAAgD;IAC9D,iBAAiB,EAAE,mCAAmC;IACtD,gBAAgB,EAAE,wCAAwC;IAC1D,qBAAqB,EAAE,iCAAiC;IACxD,iBAAiB,EAAE,wCAAwC;IAC3D,iBAAiB,EAAE;EACrB,CAAC;;EAED;EACA,IAAIC,gBAAgB,GAAG,EAAE;EACzB,IAAI3C,mBAAmB,CAACkB,IAAI,CAACmB,CAAC,IAAIA,CAAC,CAACL,YAAY,CAAC,EAAE;IACjDW,gBAAgB,GAAG,yHAAyH;EAC9I;EAEA,OAAO;AACT,WAAW/C,GAAG,oBAAoBG,YAAY,CAAC6C,WAAW,CAAC,CAAC,qBAAqBH,gBAAgB,CAAC1C,YAAY,CAAC,IAAI,kCAAkC;AACrJ,4BAA4BD,aAAa,gBAAgB4C,gBAAgB,CAAC5C,aAAa,CAAC,IAAI,yCAAyC;AACrI,mBAAmBwC,gBAAgB;AACnC;AACA;AACA;AACA,UAAUzC,MAAM,CAACgD,cAAc,CAAC,CAAC,IAAIF,gBAAgB;AACrD;AACA;AACA;AACA,GAAG;AACH,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMG,wBAAwB,GAAG,MAAAA,CAAOnD,WAAW,EAAEK,mBAAmB,KAAK;EAClF,MAAM;IAAEJ,GAAG;IAAEC,MAAM;IAAEC,aAAa;IAAEC;EAAa,CAAC,GAAGJ,WAAW;EAEhE,IAAI;IACF;IACA,IAAIoD,MAAM,GAAG;AACjB;AACA,SAASnD,GAAG;AACZ,oBAAoBC,MAAM,CAACgD,cAAc,CAAC,CAAC;AAC3C,oBAAoB/C,aAAa;AACjC,mBAAmBC,YAAY;AAC/B;AACA;AACA,CAAC;IAEG,IAAIC,mBAAmB,CAAC+B,MAAM,KAAK,CAAC,EAAE;MACpCgB,MAAM,IAAI,0CAA0C;IACtD,CAAC,MAAM;MACL/C,mBAAmB,CAACgD,OAAO,CAAC,CAAC9C,OAAO,EAAE+C,KAAK,KAAK;QAC9CF,MAAM,IAAI;AAClB,EAAEE,KAAK,GAAG,CAAC,KAAK/C,OAAO,CAACyB,IAAI;AAC5B,kBAAkBzB,OAAO,CAAC0B,WAAW;AACrC,uBAAuB1B,OAAO,CAACoB,cAAc,CAACuB,cAAc,CAAC,CAAC;AAC9D,sBAAsB3C,OAAO,CAAC2B,aAAa,CAACgB,cAAc,CAAC,CAAC;AAC5D,kBAAkB3C,OAAO,CAAC4B,UAAU,GAAG,KAAK,GAAG,IAAI;AACnD,KAAK5B,OAAO,CAAC8B,YAAY,GAAG,iBAAiB,GAAG,eAAe;AAC/D,CAAC;MACK,CAAC,CAAC;IACJ;IAEAe,MAAM,IAAI;AACd;AACA;AACA;AACA;AACA,CAAC;IAEGG,OAAO,CAACC,GAAG,CAAC,6CAA6C,CAAC;;IAE1D;IACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,8BAA8B,EAAE;MAC3DC,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACP,cAAc,EAAE;MAClB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QAAEX;MAAO,CAAC;IACjC,CAAC,CAAC;IAEF,IAAI,CAACK,QAAQ,CAACO,EAAE,EAAE;MAChB,MAAMC,SAAS,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;MACvCX,OAAO,CAACY,KAAK,CAAC,sBAAsB,EAAEF,SAAS,CAAC;MAChD,MAAM,IAAIG,KAAK,CAACH,SAAS,CAACE,KAAK,IAAI,sCAAsC,CAAC;IAC5E;IAEA,MAAME,IAAI,GAAG,MAAMZ,QAAQ,CAACS,IAAI,CAAC,CAAC;;IAElC;IACA,IAAIG,IAAI,CAACF,KAAK,EAAE;MACdZ,OAAO,CAACe,IAAI,CAAC,6BAA6B,EAAED,IAAI,CAACE,OAAO,CAAC;MACzD,OAAO,GAAGF,IAAI,CAACG,KAAK,6FAA6F;IACnH;IAEA,OAAOH,IAAI,CAACG,KAAK;EACnB,CAAC,CAAC,OAAOL,KAAK,EAAE;IACdZ,OAAO,CAACY,KAAK,CAAC,qCAAqC,EAAEA,KAAK,CAAC;IAC3D;IACA,MAAMM,gBAAgB,GAAGjC,gBAAgB,CAACxC,WAAW,EAAEK,mBAAmB,CAAC;IAC3E,OAAO,GAAGoE,gBAAgB,6HAA6H;EACzJ;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}